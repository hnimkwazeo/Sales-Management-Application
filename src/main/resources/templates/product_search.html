<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Sản phẩm</title>
        <link rel="stylesheet" th:href="@{/CSS/search_product.css}" />
        <link
            rel="icon"
            type="image/png"
            th:href="@{/images/shopping-cart.png}"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        />
        <meta name="_csrf" th:content="${_csrf.token}"/>
        <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    </head>
    <body>
        <header class="header">
            <nav class="header-nav-bar">
                <div class="container">
                    <ul>
                        <li><a th:href="@{/page_home}">Trang chủ</a></li>
                        <li>
                            <a th:href="@{/page_product}" class="active"
                                >Sản phẩm</a
                            >
                        </li>
                        <li>
                            <a th:href="@{/page_category}">Danh mục sản phẩm</a>
                        </li>
                        <li><a th:href="@{/page_customer}">Khách hàng</a></li>
                        <li><a th:href="@{/page_employee}">Nhân viên</a></li>
                        <li><a th:href="@{/page_order}">Hóa đơn</a></li>
                        <li class="dropdown">
                            <a
                                href="javascript:void(0);"
                                class="dropdown-toggle"
                            >
                                Thống kê
                                <i class="fas fa-chevron-down arrow-icon"></i>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a th:href="@{/page_statistics_revenue}"
                                        >Doanh thu (Ngày/Tháng)</a
                                    >
                                </li>
                                <li>
                                    <a th:href="@{/page_statistics_employee}"
                                        >Doanh thu (Nhân viên)</a
                                    >
                                </li>
                                <li>
                                    <a
                                        th:href="@{/page_statistics_BestSellingProduct}"
                                        >Sản phẩm bán chạy</a
                                    >
                                </li>
                                <li>
                                    <a
                                        th:href="@{/page_statistics_TopCustomers}"
                                        >Khách hàng mua nhiều</a
                                    >
                                </li>
                            </ul>
                        </li>
                        <li>
                            <form th:action="@{/logout}" method="post">
                                <button type="submit" class="logout-btn">
                                    Đăng xuất
                                </button>
                            </form>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <main>
            <div class="container main-layout">
                <aside class="search-panel">
                    <div class="search-box">
                        <h2>Tìm kiếm sản phẩm</h2>
                        <div class="form-group">
                            <label for="searchType">Tìm theo:</label>
                            <select id="searchType">
                                <option value="" disabled selected>
                                    -- Chọn tiêu chí --
                                </option>
                                <option value="name">Tên sản phẩm</option>
                                <option value="category">Tên danh mục</option>
                                <option value="price_less">Giá nhỏ hơn</option>
                                <option value="price_between">
                                    Giá trong khoảng
                                </option>
                            </select>
                        </div>
                        <div id="keyword-input-group" class="form-group hidden">
                            <label for="searchInput">Nhập từ khóa:</label>
                            <input
                                type="text"
                                id="searchInput"
                                placeholder="Nhập từ khóa..."
                            />
                        </div>
                        <div id="price-range-inputs" class="hidden">
                            <div class="form-group">
                                <label for="minPrice">Giá từ (VND):</label>
                                <input
                                    type="number"
                                    id="minPrice"
                                    placeholder="VD: 1000000"
                                />
                            </div>
                            <div class="form-group">
                                <label for="maxPrice">Đến giá (VND):</label>
                                <input
                                    type="number"
                                    id="maxPrice"
                                    placeholder="VD: 5000000"
                                />
                            </div>
                        </div>
                        <div id="search-buttons" class="hidden">
                            <button id="searchButton">Tìm kiếm</button>
                            <button id="showAllButton" class="secondary">
                                Hiển thị tất cả
                            </button>
                        </div>
                    </div>

                    <div id="productFormPanel" class="form-panel">
                        <div class="form-panel-header">
                            <h2 id="formTitle">Thêm Sản Phẩm Mới</h2>
                            <span
                                id="closeFormBtn"
                                class="close-btn"
                                aria-label="Đóng"
                                >&times;</span
                            >
                        </div>
                        <form id="productForm">
                            <input type="hidden" id="productId" />
                            <div class="form-group">
                                <label for="productName">Tên Sản Phẩm:</label>
                                <input type="text" id="productName" required />
                            </div>
                            <div class="form-group">
                                <label for="productPrice">Giá (VND):</label>
                                <input
                                    type="number"
                                    id="productPrice"
                                    required
                                />
                            </div>
                            <div class="form-group">
                                <label for="productQuantity">Số lượng:</label>
                                <input
                                    type="number"
                                    id="productQuantity"
                                    required
                                />
                            </div>
                            <div class="form-group">
                                <label for="productDescription">Mô tả:</label>
                                <textarea
                                    id="productDescription"
                                    rows="3"
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="productCategory">Danh mục:</label>
                                <select id="productCategory" required></select>
                            </div>
                            <button
                                id="saveProductBtn"
                                class="primary"
                                type="button"
                            >
                                Lưu
                            </button>
                        </form>
                    </div>
                </aside>

                <section class="results-panel">
                    <div class="results-header">
                        <h2>Danh sách sản phẩm</h2>
                        <button id="addProductBtn" class="primary">
                            Thêm mới
                        </button>
                    </div>
                    <div id="result-container">
                        <div id="result">
                            <p>Đang tải dữ liệu...</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <p>© 2025 Quản lý bán hàng - Nhóm 6</p>
            </div>
        </footer>

        <script th:src="@{/JS/search_product.js}"></script>
    </body>
</html>
